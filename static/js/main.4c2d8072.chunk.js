(this["webpackJsonpmy-parcels"]=this["webpackJsonpmy-parcels"]||[]).push([[0],Array(22).concat([function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loadState",(function(){return b})),a.d(n,"saveState",(function(){return m})),a.d(n,"clearState",(function(){return j}));var c=a(1),s=a.n(c),l=a(3),i=a.n(l),r=a(2),o=a(4);var u=new class{constructor(e=""){this.apiKey=void 0,this.baseUrl=void 0,this.getParcelInfo=(e,t="")=>fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:this.apiKey,modelName:"TrackingDocument",calledMethod:"getStatusDocuments",methodProperties:{Documents:[{DocumentNumber:e,Phone:t}]}})}).then((e=>e.json())).then((e=>e)),this.apiKey=e,this.baseUrl="https://api.novaposhta.ua/v2.0/json/"}};const d="MyParcels",b=()=>{try{const e=localStorage.getItem(d);if(null===e)return;return JSON.parse(e)}catch(e){return}},m=e=>{try{const t=JSON.stringify(e);localStorage.setItem(d,t)}catch{console.log("Unable to save to LS")}},j=()=>{localStorage.removeItem(d)};var h=a(10);const p="ADD_PARCEL",O="UPDATE_PARCEL",C="REMOVE_PARCEL",_="API_REQUEST_STARTED",N="API_REQUEST_ENDED",g="UPDATE_SETTINGS",x=[],f={language:"en",theme:"light"},E={error:"",isLoading:!1};var v=Object(o.c)({parcels:(e=x,t)=>{const{type:a,payload:n}=t;switch(a){case p:return[n,...e];case O:return e.map((e=>e.id===n.id?{...e,...n.data}:e));case C:return e.filter((e=>e.id!==n));default:return e}},settings:(e=f,t)=>{const{type:a,payload:n}=t;switch(a){case g:return{...e,...n};default:return e}},api:(e=E,t)=>{const{type:a}=t;switch(a){case _:return{...e,isLoading:!0};case N:return{...e,isLoading:!1};default:return e}}});const y=n.loadState(),S=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,R=Object(o.e)(v,y,S(Object(o.a)(h.a)));R.subscribe((()=>{const{parcels:e,settings:t}=R.getState();n.saveState({parcels:e,settings:t})}));var P=R;var T=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,44)).then((({getCLS:t,getFID:a,getFCP:n,getLCP:c,getTTFB:s})=>{t(e),a(e),n(e),c(e),s(e)}))};const A=[{value:"en",label:"EN"},{value:"ua",label:"UA"},{value:"ru",label:"RU"}],L={en:{SIGN_IN:"Sign In",TRACK_PARCEL:"Track",ENTER_TRACKING_NUMBER:"Enter tracking number",REMOVE_PARCEL:"Remove parcel",CHECK_PARCEL_STATUS:"Check parcel status"},ua:{SIGN_IN:"\u0423\u0432\u0456\u0439\u0442\u0438",TRACK_PARCEL:"\u0412\u0456\u0434\u0441\u0442\u0435\u0436\u0438\u0442\u0438",ENTER_TRACKING_NUMBER:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0441\u0438\u043b\u043a\u0438",REMOVE_PARCEL:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043f\u043e\u0441\u0438\u043b\u043a\u0443",CHECK_PARCEL_STATUS:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0441\u0438\u043b\u043a\u0438"},ru:{SIGN_IN:"\u0412\u043e\u0439\u0442\u0438",TRACK_PARCEL:"\u041e\u0442\u0441\u043b\u0435\u0434\u0438\u0442\u044c",ENTER_TRACKING_NUMBER:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0441\u044b\u043b\u043a\u0438",REMOVE_PARCEL:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u044b\u043b\u043a\u0443",CHECK_PARCEL_STATUS:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0441\u044b\u043b\u043a\u0438"}};var k=a(0);const D=Object(c.createContext)();D.displayName="Localization";const I=({children:e})=>{const{language:t}=Object(r.c)((e=>e.settings));return Object(k.jsx)(D.Provider,{value:(a=t,L[a]),children:e});var a};var U=a(43);function w(){return{type:_}}function K(){return{type:N}}function M(e){const t=e.data[0];return{number:t.Number,citySender:t.CitySender,cityRecipient:t.CityRecipient,status:t.Status,scheduledDeliveryDate:t.ScheduledDeliveryDate,dateCreated:t.DateCreated,weight:t.DocumentWeight,statusCode:t.StatusCode,warehouseRecipient:t.WarehouseRecipientNumber.toString(),deliveryCost:Number(t.DocumentCost)}}function B(e){return"3"===e.data[0].StatusCode}const G=e=>t=>{t(w()),u.getParcelInfo(e).then((e=>{B(e)?alert("Parcel not found!"):t(function(e){return{type:p,payload:{id:Object(U.a)(),title:"New parcel",...M(e)}}}(e))})).catch((e=>console.log("Error",e))).finally((()=>t(K())))},V=(e,t)=>a=>{a(w()),u.getParcelInfo(t).then((t=>{B(t)?alert("Parcel not found!"):a(function(e,t){return{type:O,payload:{id:e,data:M(t)}}}(e,t))})).catch((e=>console.log("Error",e))).finally((()=>a(K())))},$=(e,t)=>a=>{a(function(e,t){return{type:O,payload:{id:e,data:t}}}(e,t))},q=e=>t=>{t(function(e){return{type:C,payload:e}}(e))},F=e=>t=>{t({type:g,payload:e})};a(22);const J=e=>{const{onClick:t,extraClassName:a,type:n="button",btnType:c="primary",size:s="normal",text:l="Button"}=e,i=`ui-button ui-button--${c} ui-button--${s} ${a}`;return Object(k.jsx)("button",{type:n,className:i,onClick:t,children:l})};a(23);a(24);const H=e=>{const{icon:t="",onClick:a,extraClassName:n,title:c="Click me",type:s="button"}=e,l=`ui-icon-button icon-${t} ${n}`;return Object(k.jsx)("button",{type:s,className:l,onClick:a,title:c,children:Object(k.jsx)("span",{className:"ui-icon-button__text",children:c})})};a(25);const z=e=>{const{type:t,name:a,value:n,onChange:c,onBlur:s,extraClassName:l,placeholder:i,required:r,autofocus:o,disabled:u}=e,d=l?`ui-input ${l}`:"ui-input";return Object(k.jsx)("input",{type:t,name:a,value:n,className:d,onChange:c,onBlur:s,placeholder:i,required:r,autoFocus:o,disabled:u,size:n.length})};z.defaultProps={extraClassName:"",onChange:null,onBlur:null,value:"",type:"text",name:"ui-input",placeholder:"",required:!1,autofocus:!1,disabled:!1};a(26);const Q=e=>{const{value:t,onChange:a,options:n,extraClassName:c,title:s,required:l}=e,i=c?`ui-select ${c}`:"ui-select";return Object(k.jsx)("select",{onChange:a,value:t,required:l,className:i,title:s,children:n.map((e=>Object(k.jsx)("option",{value:e.value,disabled:e.disabled,className:"ui-select__option",children:e.label},e.value)))})};Q.defaultProps={extraClassName:"",onChange:null,value:"",title:"Select me",options:[{value:"opt1",label:"Option 1"},{value:"opt2",label:"Option 2"},{value:"opt3",label:"Option 3"}],required:!1};a(27);a(28);const W=({title:e,isVisible:t,onClose:a,children:n,extraClassName:s})=>{const i=Object(c.useContext)(D),r=s?`ui-modal ${s}`:"ui-modal",o=document.getElementById("modal-root");return t&&Object(l.createPortal)(Object(k.jsx)("div",{className:"ui-modal__backdrop",children:Object(k.jsxs)("div",{role:"dialog","aria-labelledby":"ui-modal-title","aria-modal":"true",className:r,children:[Object(k.jsxs)("div",{className:"ui-modal__header",children:[Object(k.jsx)("h4",{id:"ui-modal-title",className:"ui-modal__title",children:e}),Object(k.jsx)(H,{extraClassName:"ui-modal__btn-close",icon:"cancel",onClick:a,title:i.CLOSE})]}),Object(k.jsx)("div",{className:"ui-modal__content",children:n})]})}),o)};W.defaultProps={title:"Modal title",isVisible:!1};a(29);a(30);function X(){const e=Object(c.useContext)(D),t=Object(r.b)(),{parcels:a}=Object(r.c)((e=>e)),[n,s]=Object(c.useState)("");return Object(k.jsxs)("form",{action:"",className:"add-parcel-form",onSubmit:function(e){if(e.preventDefault(),!n)return void alert("Please enter tracking number!");a.some((e=>e.number===n))?alert("Parcel already added!"):(t(G(n)),s(""))},noValidate:!0,children:[Object(k.jsx)(z,{extraClassName:"add-parcel-form__input",value:n,onChange:function(e){s(e.target.value)},placeholder:e.ENTER_TRACKING_NUMBER,required:!0}),Object(k.jsx)(J,{type:"submit",extraClassName:"add-parcel-form__btn",text:e.TRACK_PARCEL})]})}a(31);const Y=e=>{const{data:t,onRemoveParcelClick:a,onParcelTitleBlur:n,onCheckParcelStatusClick:s,STR:l}=e,[i,r]=Object(c.useState)(t.title),[o,u]=Object(c.useState)(!1);Object(c.useEffect)((()=>{u(!1)}),[t]);const d=o?"parcel-list-item__check-btn loading":"parcel-list-item__check-btn";return Object(k.jsxs)("li",{id:t.id,className:"parcel-list-item",children:[Object(k.jsxs)("header",{className:"parcel-list-item__header",children:[Object(k.jsx)(z,{extraClassName:"parcel-list-item__title",value:i,onChange:function(e){r(e.target.value)},onBlur:n}),Object(k.jsx)(H,{onClick:function(e){u(!0),s(e)},extraClassName:d,title:l.CHECK_PARCEL_STATUS,icon:"arrows-cw"}),Object(k.jsx)(H,{onClick:a,extraClassName:"parcel-list-item__remove-btn",title:l.REMOVE_PARCEL,icon:"trash"})]}),Object(k.jsxs)("main",{className:"parcel-list-item__main",children:[Object(k.jsx)("h4",{className:"parcel-list-item__number",children:t.number}),Object(k.jsxs)("div",{className:"parcel-list-item__route",children:[t.citySender," - ",t.cityRecipient]}),Object(k.jsx)("div",{className:"parcel-list-item__status",children:t.status}),Object(k.jsx)("div",{className:"parcel-list-item__delivery-date",children:t.scheduledDeliveryDate})]})]})};a(32);const Z=()=>{const{parcels:e}=Object(r.c)((e=>e)),t=Object(r.c)((e=>e.api.isLoading)),a=Object(r.b)(),n=Object(c.useContext)(D);function s(e){const t=e.target.closest("li").id;a(q(t))}function l(t){const n=t.target.closest("li").id,{number:c}=e.find((e=>e.id===n));a(V(n,c))}function i(e){const t=e.target.closest("li").id,n=e.target.value;a($(t,{title:n}))}return Object(k.jsx)("ul",{className:"parcel-list",children:e.map((e=>Object(k.jsx)(Y,{data:e,STR:n,isApiLoading:t,onRemoveParcelClick:s,onCheckParcelStatusClick:l,onParcelTitleBlur:i},e.id)))})};a(33);a(34);const ee=()=>{const e=Object(r.b)(),{theme:t}=Object(r.c)((e=>e.settings)),a="light"===t?"moon":"sun";return Object(k.jsx)(H,{icon:a,onClick:function(){e(F({theme:"light"===t?"dark":"light"}))},extraClassName:"theme-toggler"})};a(35);const te=()=>{const e=Object(r.b)(),t=Object(c.useContext)(D),{language:a}=Object(r.c)((e=>e.settings));return Object(k.jsx)(Q,{value:a,onChange:function(t){const a=t.target.value;e(F({language:a}))},options:A,extraClassName:"language-selector",title:t.TOGGLE_LANGUAGE})};a(36);const ae=()=>Object(k.jsx)("header",{className:"header",children:Object(k.jsxs)("div",{className:"header__content wrapper",children:[Object(k.jsx)("span",{className:"header__logo",children:"MyParcels"}),Object(k.jsxs)("div",{className:"header__right",children:[Object(k.jsx)(te,{}),Object(k.jsx)(ee,{})]})]})});a(37);const ne=({children:e})=>Object(k.jsx)("main",{className:"main wrapper",children:Object(k.jsx)("div",{className:"main__content",children:e})});a(38);const ce=()=>Object(k.jsx)("footer",{className:"footer",children:Object(k.jsx)("div",{className:"footer__content wrapper",children:"\xa9 2021, Serhii Tyshchenko"})}),se=({children:e})=>Object(k.jsxs)("div",{className:"container",children:[Object(k.jsx)(ae,{}),Object(k.jsx)(ne,{children:e}),Object(k.jsx)(ce,{})]});a(39);s.a.Component;const le=()=>Object(k.jsxs)(se,{children:[Object(k.jsx)(X,{}),Object(k.jsx)(Z,{})]});var ie=function(){const{theme:e}=Object(r.c)((e=>e.settings));return document.documentElement.setAttribute("data-theme",e),Object(k.jsx)(le,{})};a(40);i.a.render(Object(k.jsx)(r.a,{store:P,children:Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)(I,{children:Object(k.jsx)(ie,{})})})}),document.getElementById("root")),T()}]),[[41,1,2]]]);
//# sourceMappingURL=main.4c2d8072.chunk.js.map
(this["webpackJsonpmy-parcels"]=this["webpackJsonpmy-parcels"]||[]).push([[0],Array(22).concat([function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var a={};c.r(a),c.d(a,"loadState",(function(){return j})),c.d(a,"saveState",(function(){return b})),c.d(a,"clearState",(function(){return h}));var n=c(1),s=c.n(n),l=c(3),r=c.n(l),o=c(2),i=c(4);var d=new class{constructor(e=""){this.apiKey=void 0,this.baseUrl=void 0,this.getParcelInfo=(e,t="")=>fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:this.apiKey,modelName:"TrackingDocument",calledMethod:"getStatusDocuments",methodProperties:{Documents:[{DocumentNumber:e,Phone:t}]}})}).then((e=>e.json())).then((e=>e)),this.apiKey=e,this.baseUrl="https://api.novaposhta.ua/v2.0/json/"}};const u="MyParcels",j=()=>{try{const e=localStorage.getItem(u);if(null===e)return;return JSON.parse(e)}catch(e){return}},b=e=>{try{const t=JSON.stringify(e);localStorage.setItem(u,t)}catch{console.log("Unable to save to LS")}},h=()=>{localStorage.removeItem(u)};var m=c(10);const p="ADD_PARCEL",O="UPDATE_PARCEL",_="REMOVE_PARCEL",N="API_REQUEST_STARTED",g="API_REQUEST_ENDED",C="UPDATE_SETTINGS",E=[],v={language:"en",theme:"light"},y={error:"",isLoading:!1};var x=Object(i.c)({parcels:(e=E,t)=>{const{type:c,payload:a}=t;switch(c){case p:return[a,...e];case O:return e.map((e=>e.id===a.id?{...e,...a.data}:e));case _:return e.filter((e=>e.id!==a));default:return e}},settings:(e=v,t)=>{const{type:c,payload:a}=t;switch(c){case C:return{...e,...a};default:return e}},api:(e=y,t)=>{const{type:c}=t;switch(c){case N:return{...e,isLoading:!0};case g:return{...e,isLoading:!1};default:return e}}});const S=a.loadState(),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,R=Object(i.e)(x,S,f(Object(i.a)(m.a)));R.subscribe((()=>{const{parcels:e,settings:t}=R.getState();a.saveState({parcels:e,settings:t})}));var P=R;var A=e=>{e&&e instanceof Function&&c.e(3).then(c.bind(null,44)).then((({getCLS:t,getFID:c,getFCP:a,getLCP:n,getTTFB:s})=>{t(e),c(e),a(e),n(e),s(e)}))};const T={en:{SIGN_IN:"Sign In",TRACK_PARCEL:"Track",ENTER_TRACKING_NUMBER:"Enter tracking number",REMOVE_PARCEL:"Remove parcel",CHECK_PARCEL_STATUS:"Check parcel status",NO_PARCELS:"You have no parcels"},ua:{SIGN_IN:"\u0423\u0432\u0456\u0439\u0442\u0438",TRACK_PARCEL:"\u0412\u0456\u0434\u0441\u0442\u0435\u0436\u0438\u0442\u0438",ENTER_TRACKING_NUMBER:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0441\u0438\u043b\u043a\u0438",REMOVE_PARCEL:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043f\u043e\u0441\u0438\u043b\u043a\u0443",CHECK_PARCEL_STATUS:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0441\u0438\u043b\u043a\u0438",NO_PARCELS:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u043c\u0430\u0454 \u043f\u043e\u0441\u0438\u043b\u043e\u043a"},ru:{SIGN_IN:"\u0412\u043e\u0439\u0442\u0438",TRACK_PARCEL:"\u041e\u0442\u0441\u043b\u0435\u0434\u0438\u0442\u044c",ENTER_TRACKING_NUMBER:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0441\u044b\u043b\u043a\u0438",REMOVE_PARCEL:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u044b\u043b\u043a\u0443",CHECK_PARCEL_STATUS:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0441\u044b\u043b\u043a\u0438",NO_PARCELS:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u043e\u0441\u044b\u043b\u043e\u043a"}};var L=c(0);const k=Object(n.createContext)();k.displayName="Localization";const D=({children:e})=>{const{language:t}=Object(o.c)((e=>e.settings));return Object(L.jsx)(k.Provider,{value:T[t],children:e})};var I=c(43);const U=()=>({type:N}),w=()=>({type:g}),K=e=>{const t=e.data[0];return{number:t.Number,citySender:t.CitySender,cityRecipient:t.CityRecipient,status:t.Status,scheduledDeliveryDate:t.ScheduledDeliveryDate,dateCreated:t.DateCreated,weight:t.DocumentWeight,statusCode:t.StatusCode,warehouseRecipient:t.WarehouseRecipientNumber.toString(),deliveryCost:Number(t.DocumentCost)}},M=e=>"3"===e.data[0].StatusCode,G=e=>t=>{t(U()),d.getParcelInfo(e).then((e=>{M(e)?alert("Parcel not found!"):t((e=>({type:p,payload:{id:Object(I.a)(),title:"New parcel",...K(e)}}))(e))})).catch((e=>console.log("Error",e))).finally((()=>t(w())))},B=(e,t)=>c=>{c(U()),d.getParcelInfo(t).then((t=>{M(t)?alert("Parcel not found!"):c(((e,t)=>({type:O,payload:{id:e,data:K(t)}}))(e,t))})).catch((e=>console.log("Error",e))).finally((()=>c(w())))},V=(e,t)=>c=>{c(((e,t)=>({type:O,payload:{id:e,data:t}}))(e,t))},q=e=>t=>{t((e=>({type:_,payload:e}))(e))},F=e=>t=>{t({type:C,payload:e})},J={string:e=>e,object:e=>Object.keys(e).filter((t=>e[t])).join(" ").trim(),array:e=>e.join(" ").trim()},H={string:e=>"string"===typeof e,object:e=>"object"===typeof e&&!Array.isArray(e),array:e=>Array.isArray(e)},z=(...e)=>e.map((e=>(e=>{const t=Object.keys(H).find((t=>H[t](e)));return J[t](e)})(e))).join(" ").trim();c(22);c(23);c(24);const Q="ui-icon-button",W=e=>{const{icon:t="trash",onClick:c,className:a="",title:n="Click me",type:s="button"}=e,l=z(Q,"icon-".concat(t),a);return Object(L.jsx)("button",{type:s,className:l,onClick:c,title:n,children:Object(L.jsx)("span",{className:"".concat(Q,"__text"),children:n})})};c(25);const X=e=>{const{type:t,name:c,value:a,onChange:n,onBlur:s,className:l,placeholder:r,required:o,autofocus:i,disabled:d}=e,u=z("ui-input",l);return Object(L.jsx)("input",{type:t,name:c,value:a,className:u,onChange:n,onBlur:s,placeholder:r,required:o,autoFocus:i,disabled:d,size:a.length})};X.defaultProps={className:"",onChange:null,onBlur:null,value:"",type:"text",name:"ui-input",placeholder:"",required:!1,autofocus:!1,disabled:!1};c(26);const Y="ui-select",Z=e=>{const{value:t,onChange:c,options:a,className:n,title:s,required:l}=e,r=z(Y,n);return Object(L.jsx)("select",{onChange:c,value:t,required:l,className:r,title:s,children:a.map((({value:e,disabled:t,label:c})=>Object(L.jsx)("option",{value:e,disabled:t,className:"".concat(Y,"__option"),children:c},e)))})};Z.defaultProps={className:"",onChange:null,value:"",title:"Select me",options:[{value:"opt1",label:"Option 1"},{value:"opt2",label:"Option 2"},{value:"opt3",label:"Option 3"}],required:!1};c(27);c(28);const $="ui-modal",ee=({title:e,isVisible:t,onClose:c,children:a,className:s})=>{const r=Object(n.useContext)(k),o=z($,s),i=document.getElementById("modal-root");return t&&Object(l.createPortal)(Object(L.jsx)("div",{className:"".concat($,"__backdrop"),children:Object(L.jsxs)("div",{role:"dialog","aria-labelledby":"ui-modal-title","aria-modal":"true",className:o,children:[Object(L.jsxs)("div",{className:"ui-modal__header",children:[Object(L.jsx)("h4",{id:"ui-modal-title",className:"".concat($,"__title"),children:e}),Object(L.jsx)(W,{className:"".concat($,"__btn-close"),icon:"cancel",onClick:c,title:r.CLOSE})]}),Object(L.jsx)("div",{className:"".concat($,"__content"),children:a})]})}),i)};ee.defaultProps={title:"Modal title",isVisible:!1,className:""};c(29);c(30);const te="add-parcel-form",ce=()=>{const e=Object(n.useContext)(k),t=Object(o.b)(),{parcels:c}=Object(o.c)((e=>e)),[a,s]=Object(n.useState)("");return Object(L.jsxs)("form",{action:"",className:te,onSubmit:e=>{if(e.preventDefault(),!a)return void alert("Please enter tracking number!");c.some((e=>e.number===a))?alert("Parcel already added!"):(t(G(a)),s(""))},noValidate:!0,children:[Object(L.jsx)(X,{className:"".concat(te,"__input"),value:a,onChange:e=>s(e.target.value),placeholder:e.ENTER_TRACKING_NUMBER,required:!0}),Object(L.jsx)(W,{type:"submit",icon:"search",className:"".concat(te,"__btn"),text:e.TRACK_PARCEL})]})},ae=e=>{var t;return null===(t=e.target.closest("li"))||void 0===t?void 0:t.id};c(31);const ne="parcel-list-item",se=e=>{const{data:t,onRemoveParcelClick:c,onParcelUpdate:a,onCheckParcelStatusClick:s,STR:l}=e,{id:r,number:o,citySender:i,cityRecipient:d,status:u,scheduledDeliveryDate:j}=t,[b,h]=Object(n.useState)(t.title),[m,p]=Object(n.useState)(!1);Object(n.useEffect)((()=>p(!1)),[t]);const O=z("".concat(ne,"__check-btn"),{loading:m});return Object(L.jsxs)("li",{id:r,className:ne,children:[Object(L.jsxs)("header",{className:"".concat(ne,"__header"),children:[Object(L.jsx)(X,{className:"".concat(ne,"__title"),value:b,onChange:e=>h(e.target.value),onBlur:e=>a(ae(e),b)}),Object(L.jsx)(W,{onClick:e=>{p(!0),s(ae(e))},className:O,title:l.CHECK_PARCEL_STATUS,icon:"arrows-cw"}),Object(L.jsx)(W,{onClick:e=>c(ae(e)),className:"".concat(ne,"__remove-btn"),title:l.REMOVE_PARCEL,icon:"trash"})]}),Object(L.jsxs)("main",{className:"".concat(ne,"__main"),children:[Object(L.jsx)("h4",{className:"".concat(ne,"__number"),children:o}),Object(L.jsxs)("div",{className:"".concat(ne,"__route"),children:[i," \u21d2 ",d]}),Object(L.jsx)("div",{className:"".concat(ne,"__status"),children:u}),Object(L.jsx)("div",{className:"".concat(ne,"__delivery-date"),children:j})]})]})};c(32);const le="parcel-list",re=()=>{const{parcels:e}=Object(o.c)((e=>e)),t=Object(o.c)((e=>e.api.isLoading)),c=Object(o.b)(),a=Object(n.useContext)(k),s=e=>c(q(e)),l=t=>{const{number:a}=e.find((e=>e.id===t));c(B(t,a))},r=(e,t)=>c(V(e,{title:t}));return Object(L.jsx)(L.Fragment,{children:e.length?Object(L.jsx)("ul",{className:le,children:e.map((e=>Object(L.jsx)(se,{data:e,STR:a,isApiLoading:t,onRemoveParcelClick:s,onCheckParcelStatusClick:l,onParcelUpdate:r},e.id)))}):Object(L.jsx)("div",{className:"".concat(le,"__no-parcels"),children:a.NO_PARCELS})})};c(33);c(34);const oe=()=>{const e=Object(o.b)(),{theme:t}=Object(o.c)((e=>e.settings)),c="light"===t?"moon":"sun";return Object(L.jsx)(W,{icon:c,onClick:()=>{e(F({theme:"light"===t?"dark":"light"}))},className:"theme-toggler"})},ie=[{value:"en",label:"EN"},{value:"ua",label:"UA"},{value:"ru",label:"RU"}];c(35);const de=()=>{const e=Object(o.b)(),t=Object(n.useContext)(k),{language:c}=Object(o.c)((e=>e.settings));return Object(L.jsx)(Z,{value:c,onChange:t=>e(F({language:t.target.value})),options:ie,className:"language-selector",title:t.TOGGLE_LANGUAGE})};c(36);const ue="header",je=()=>Object(L.jsx)("header",{className:ue,children:Object(L.jsxs)("div",{className:"header__content wrapper",children:[Object(L.jsx)("span",{className:"header__logo",children:"MyParcels"}),Object(L.jsx)("div",{className:"header__middle",children:Object(L.jsx)(ce,{})}),Object(L.jsxs)("div",{className:"header__right",children:[Object(L.jsx)(de,{}),Object(L.jsx)(oe,{})]})]})});c(37);const be=({children:e})=>Object(L.jsx)("main",{className:"main wrapper",children:Object(L.jsx)("div",{className:"main__content",children:e})});c(38);const he="footer",me=()=>Object(L.jsx)("footer",{className:he,children:Object(L.jsx)("div",{className:"footer__content wrapper",children:Object(L.jsxs)("a",{href:"https://github.com/serhii-tyshchenko",children:["\xa9 ","Serhii Tyshchenko"]})})}),pe=({children:e})=>Object(L.jsxs)("div",{className:"container",children:[Object(L.jsx)(je,{}),Object(L.jsx)(be,{children:e}),Object(L.jsx)(me,{})]});c(39);s.a.Component;const Oe=()=>Object(L.jsx)(pe,{children:Object(L.jsx)(re,{})});var _e=()=>{const{theme:e}=Object(o.c)((e=>e.settings));return document.documentElement.setAttribute("data-theme",e),Object(L.jsx)(Oe,{})};c(40);r.a.render(Object(L.jsx)(o.a,{store:P,children:Object(L.jsx)(s.a.StrictMode,{children:Object(L.jsx)(D,{children:Object(L.jsx)(_e,{})})})}),document.getElementById("root")),A()}]),[[41,1,2]]]);
//# sourceMappingURL=main.864e0624.chunk.js.map
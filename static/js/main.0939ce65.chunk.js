(this["webpackJsonpmy-parcels"]=this["webpackJsonpmy-parcels"]||[]).push([[0],Array(22).concat([function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var c={};a.r(c),a.d(c,"loadState",(function(){return j})),a.d(c,"saveState",(function(){return b})),a.d(c,"clearState",(function(){return h}));var n=a(1),s=a.n(n),l=a(3),r=a.n(l),i=a(2),o=a(4);var d=new class{constructor(e=""){this.apiKey=void 0,this.baseUrl=void 0,this.getParcelInfo=(e,t="")=>fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:this.apiKey,modelName:"TrackingDocument",calledMethod:"getStatusDocuments",methodProperties:{Documents:[{DocumentNumber:e,Phone:t}]}})}).then((e=>e.json())).then((e=>e)),this.apiKey=e,this.baseUrl="https://api.novaposhta.ua/v2.0/json/"}};const u="MyParcels",j=()=>{try{const e=localStorage.getItem(u);if(null===e)return;return JSON.parse(e)}catch(e){return}},b=e=>{try{const t=JSON.stringify(e);localStorage.setItem(u,t)}catch{console.log("Unable to save to LS")}},h=()=>{localStorage.removeItem(u)};var m=a(10);const p="ADD_PARCEL",O="UPDATE_PARCEL",_="REMOVE_PARCEL",C="API_REQUEST_STARTED",N="API_REQUEST_ENDED",g="UPDATE_SETTINGS",x=[],E={language:"en",theme:"light"},v={error:"",isLoading:!1};var S=Object(o.c)({parcels:(e=x,t)=>{const{type:a,payload:c}=t;switch(a){case p:return[c,...e];case O:return e.map((e=>e.id===c.id?{...e,...c.data}:e));case _:return e.filter((e=>e.id!==c));default:return e}},settings:(e=E,t)=>{const{type:a,payload:c}=t;switch(a){case g:return{...e,...c};default:return e}},api:(e=v,t)=>{const{type:a}=t;switch(a){case C:return{...e,isLoading:!0};case N:return{...e,isLoading:!1};default:return e}}});const y=c.loadState(),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,R=Object(o.e)(S,y,f(Object(o.a)(m.a)));R.subscribe((()=>{const{parcels:e,settings:t}=R.getState();c.saveState({parcels:e,settings:t})}));var P=R;var A=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,44)).then((({getCLS:t,getFID:a,getFCP:c,getLCP:n,getTTFB:s})=>{t(e),a(e),c(e),n(e),s(e)}))};const T={en:{SIGN_IN:"Sign In",TRACK_PARCEL:"Track",ENTER_TRACKING_NUMBER:"Enter tracking number",REMOVE_PARCEL:"Remove parcel",CHECK_PARCEL_STATUS:"Check parcel status",NO_PARCELS:"You have no parcels"},ua:{SIGN_IN:"\u0423\u0432\u0456\u0439\u0442\u0438",TRACK_PARCEL:"\u0412\u0456\u0434\u0441\u0442\u0435\u0436\u0438\u0442\u0438",ENTER_TRACKING_NUMBER:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0441\u0438\u043b\u043a\u0438",REMOVE_PARCEL:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043f\u043e\u0441\u0438\u043b\u043a\u0443",CHECK_PARCEL_STATUS:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0441\u0438\u043b\u043a\u0438",NO_PARCELS:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u043c\u0430\u0454 \u043f\u043e\u0441\u0438\u043b\u043e\u043a"},ru:{SIGN_IN:"\u0412\u043e\u0439\u0442\u0438",TRACK_PARCEL:"\u041e\u0442\u0441\u043b\u0435\u0434\u0438\u0442\u044c",ENTER_TRACKING_NUMBER:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0441\u044b\u043b\u043a\u0438",REMOVE_PARCEL:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u044b\u043b\u043a\u0443",CHECK_PARCEL_STATUS:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0441\u044b\u043b\u043a\u0438",NO_PARCELS:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u043e\u0441\u044b\u043b\u043e\u043a"}};var L=a(0);const k=Object(n.createContext)();k.displayName="Localization";const D=({children:e})=>{const{language:t}=Object(i.c)((e=>e.settings));return Object(L.jsx)(k.Provider,{value:T[t],children:e})};var I=a(43);const U=()=>({type:C}),w=()=>({type:N}),K=e=>{const t=e.data[0];return{number:t.Number,citySender:t.CitySender,cityRecipient:t.CityRecipient,status:t.Status,scheduledDeliveryDate:t.ScheduledDeliveryDate,dateCreated:t.DateCreated,weight:t.DocumentWeight,statusCode:t.StatusCode,warehouseRecipient:t.WarehouseRecipientNumber.toString(),deliveryCost:Number(t.DocumentCost)}},M=e=>"3"===e.data[0].StatusCode,B=e=>t=>{t(U()),d.getParcelInfo(e).then((e=>{M(e)?alert("Parcel not found!"):t((e=>({type:p,payload:{id:Object(I.a)(),title:"New parcel",...K(e)}}))(e))})).catch((e=>console.log("Error",e))).finally((()=>t(w())))},$=(e,t)=>a=>{a(U()),d.getParcelInfo(t).then((t=>{M(t)?alert("Parcel not found!"):a(((e,t)=>({type:O,payload:{id:e,data:K(t)}}))(e,t))})).catch((e=>console.log("Error",e))).finally((()=>a(w())))},G=(e,t)=>a=>{a(((e,t)=>({type:O,payload:{id:e,data:t}}))(e,t))},V=e=>t=>{t((e=>({type:_,payload:e}))(e))},q=e=>t=>{t({type:g,payload:e})};a(22);a(23);a(24);const F=e=>{const{icon:t="",onClick:a,extraClassName:c,title:n="Click me",type:s="button"}=e,l=`ui-icon-button icon-${t} ${c}`;return Object(L.jsx)("button",{type:s,className:l,onClick:a,title:n,children:Object(L.jsx)("span",{className:"ui-icon-button__text",children:n})})};a(25);const J=e=>{const{type:t,name:a,value:c,onChange:n,onBlur:s,extraClassName:l,placeholder:r,required:i,autofocus:o,disabled:d}=e,u=l?`ui-input ${l}`:"ui-input";return Object(L.jsx)("input",{type:t,name:a,value:c,className:u,onChange:n,onBlur:s,placeholder:r,required:i,autoFocus:o,disabled:d,size:c.length})};J.defaultProps={extraClassName:"",onChange:null,onBlur:null,value:"",type:"text",name:"ui-input",placeholder:"",required:!1,autofocus:!1,disabled:!1};a(26);const H=e=>{const{value:t,onChange:a,options:c,extraClassName:n,title:s,required:l}=e,r=n?`ui-select ${n}`:"ui-select";return Object(L.jsx)("select",{onChange:a,value:t,required:l,className:r,title:s,children:c.map((e=>Object(L.jsx)("option",{value:e.value,disabled:e.disabled,className:"ui-select__option",children:e.label},e.value)))})};H.defaultProps={extraClassName:"",onChange:null,value:"",title:"Select me",options:[{value:"opt1",label:"Option 1"},{value:"opt2",label:"Option 2"},{value:"opt3",label:"Option 3"}],required:!1};a(27);a(28);const z=({title:e,isVisible:t,onClose:a,children:c,extraClassName:s})=>{const r=Object(n.useContext)(k),i=s?`ui-modal ${s}`:"ui-modal",o=document.getElementById("modal-root");return t&&Object(l.createPortal)(Object(L.jsx)("div",{className:"ui-modal__backdrop",children:Object(L.jsxs)("div",{role:"dialog","aria-labelledby":"ui-modal-title","aria-modal":"true",className:i,children:[Object(L.jsxs)("div",{className:"ui-modal__header",children:[Object(L.jsx)("h4",{id:"ui-modal-title",className:"ui-modal__title",children:e}),Object(L.jsx)(F,{extraClassName:"ui-modal__btn-close",icon:"cancel",onClick:a,title:r.CLOSE})]}),Object(L.jsx)("div",{className:"ui-modal__content",children:c})]})}),o)};z.defaultProps={title:"Modal title",isVisible:!1};a(29);a(30);const Q=()=>{const e=Object(n.useContext)(k),t=Object(i.b)(),{parcels:a}=Object(i.c)((e=>e)),[c,s]=Object(n.useState)("");return Object(L.jsxs)("form",{action:"",className:"add-parcel-form",onSubmit:e=>{if(e.preventDefault(),!c)return void alert("Please enter tracking number!");a.some((e=>e.number===c))?alert("Parcel already added!"):(t(B(c)),s(""))},noValidate:!0,children:[Object(L.jsx)(J,{extraClassName:"add-parcel-form__input",value:c,onChange:e=>s(e.target.value),placeholder:e.ENTER_TRACKING_NUMBER,required:!0}),Object(L.jsx)(F,{type:"submit",icon:"search",extraClassName:"add-parcel-form__btn",text:e.TRACK_PARCEL})]})},W=e=>{var t;return null===(t=e.target.closest("li"))||void 0===t?void 0:t.id};a(31);const X="parcel-list-item",Y=e=>{const{data:t,onRemoveParcelClick:a,onParcelTitleBlur:c,onCheckParcelStatusClick:s,STR:l}=e,[r,i]=Object(n.useState)(t.title),[o,d]=Object(n.useState)(!1);Object(n.useEffect)((()=>d(!1)),[t]);const u=o?"parcel-list-item__check-btn loading":"parcel-list-item__check-btn";return Object(L.jsxs)("li",{id:t.id,className:X,children:[Object(L.jsxs)("header",{className:`${X}__header`,children:[Object(L.jsx)(J,{extraClassName:`${X}__title`,value:r,onChange:e=>i(e.target.value),onBlur:e=>c(W(e),r)}),Object(L.jsx)(F,{onClick:e=>{d(!0),s(W(e))},extraClassName:u,title:l.CHECK_PARCEL_STATUS,icon:"arrows-cw"}),Object(L.jsx)(F,{onClick:e=>a(W(e)),extraClassName:`${X}__remove-btn`,title:l.REMOVE_PARCEL,icon:"trash"})]}),Object(L.jsxs)("main",{className:`${X}__main`,children:[Object(L.jsx)("h4",{className:`${X}__number`,children:t.number}),Object(L.jsxs)("div",{className:`${X}__route`,children:[t.citySender," - ",t.cityRecipient]}),Object(L.jsx)("div",{className:`${X}__status`,children:t.status}),Object(L.jsx)("div",{className:`${X}__delivery-date`,children:t.scheduledDeliveryDate})]})]})};a(32);const Z="parcel-list",ee=()=>{const{parcels:e}=Object(i.c)((e=>e)),t=Object(i.c)((e=>e.api.isLoading)),a=Object(i.b)(),c=Object(n.useContext)(k),s=e=>a(V(e)),l=t=>{const{number:c}=e.find((e=>e.id===t));a($(t,c))},r=(e,t)=>a(G(e,{title:t}));return Object(L.jsx)(L.Fragment,{children:e.length?Object(L.jsx)("ul",{className:Z,children:e.map((e=>Object(L.jsx)(Y,{data:e,STR:c,isApiLoading:t,onRemoveParcelClick:s,onCheckParcelStatusClick:l,onParcelTitleBlur:r},e.id)))}):Object(L.jsx)("div",{className:"parcel-list__no-parcels",children:c.NO_PARCELS})})};a(33);a(34);const te=()=>{const e=Object(i.b)(),{theme:t}=Object(i.c)((e=>e.settings)),a="light"===t?"moon":"sun";return Object(L.jsx)(F,{icon:a,onClick:()=>{e(q({theme:"light"===t?"dark":"light"}))},extraClassName:"theme-toggler"})},ae=[{value:"en",label:"EN"},{value:"ua",label:"UA"},{value:"ru",label:"RU"}];a(35);const ce=()=>{const e=Object(i.b)(),t=Object(n.useContext)(k),{language:a}=Object(i.c)((e=>e.settings));return Object(L.jsx)(H,{value:a,onChange:t=>e(q({language:t.target.value})),options:ae,extraClassName:"language-selector",title:t.TOGGLE_LANGUAGE})};a(36);const ne="header",se=()=>Object(L.jsx)("header",{className:ne,children:Object(L.jsxs)("div",{className:"header__content wrapper",children:[Object(L.jsx)("span",{className:"header__logo",children:"MyParcels"}),Object(L.jsx)("div",{className:"header__middle",children:Object(L.jsx)(Q,{})}),Object(L.jsxs)("div",{className:"header__right",children:[Object(L.jsx)(ce,{}),Object(L.jsx)(te,{})]})]})});a(37);const le=({children:e})=>Object(L.jsx)("main",{className:"main wrapper",children:Object(L.jsx)("div",{className:"main__content",children:e})});a(38);const re="footer",ie=()=>Object(L.jsx)("footer",{className:re,children:Object(L.jsx)("div",{className:"footer__content wrapper",children:Object(L.jsxs)("a",{href:"https://github.com/serhii-tyshchenko",children:["\xa9 ","Serhii Tyshchenko"]})})}),oe=({children:e})=>Object(L.jsxs)("div",{className:"container",children:[Object(L.jsx)(se,{}),Object(L.jsx)(le,{children:e}),Object(L.jsx)(ie,{})]});a(39);s.a.Component;const de=()=>Object(L.jsx)(oe,{children:Object(L.jsx)(ee,{})});var ue=()=>{const{theme:e}=Object(i.c)((e=>e.settings));return document.documentElement.setAttribute("data-theme",e),Object(L.jsx)(de,{})};a(40);r.a.render(Object(L.jsx)(i.a,{store:P,children:Object(L.jsx)(s.a.StrictMode,{children:Object(L.jsx)(D,{children:Object(L.jsx)(ue,{})})})}),document.getElementById("root")),A()}]),[[41,1,2]]]);
//# sourceMappingURL=main.0939ce65.chunk.js.map
(this["webpackJsonpmy-parcels"]=this["webpackJsonpmy-parcels"]||[]).push([[0],Array(22).concat([function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var a={};c.r(a),c.d(a,"loadState",(function(){return j})),c.d(a,"saveState",(function(){return h})),c.d(a,"clearState",(function(){return b}));var n=c(1),s=c.n(n),i=c(3),l=c.n(i),r=c(2),o=c(4);var d=new class{constructor(e=""){this.apiKey=void 0,this.baseUrl=void 0,this.getParcelInfo=(e,t="")=>fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:this.apiKey,modelName:"TrackingDocument",calledMethod:"getStatusDocuments",methodProperties:{Documents:[{DocumentNumber:e,Phone:t}]}})}).then((e=>e.json())).then((e=>e)),this.apiKey=e,this.baseUrl="https://api.novaposhta.ua/v2.0/json/"}};const u="MyParcels",j=()=>{try{const e=localStorage.getItem(u);if(null===e)return;return JSON.parse(e)}catch(e){return}},h=e=>{try{const t=JSON.stringify(e);localStorage.setItem(u,t)}catch{console.log("Unable to save to LS")}},b=()=>{localStorage.removeItem(u)};var m=c(10);const O="ADD_PARCEL",_="UPDATE_PARCEL",p="REMOVE_PARCEL",C="API_REQUEST_STARTED",N="API_REQUEST_ENDED",E="UPDATE_SETTINGS",g=[],v={language:"en",theme:"light"},x={error:"",isLoading:!1};var A=Object(o.c)({parcels:(e=g,t)=>{const{type:c,payload:a}=t;switch(c){case O:return[a,...e];case _:return e.map((e=>e.id===a.id?{...e,...a.data}:e));case p:return e.filter((e=>e.id!==a));default:return e}},settings:(e=v,t)=>{const{type:c,payload:a}=t;switch(c){case E:return{...e,...a};default:return e}},api:(e=x,t)=>{const{type:c}=t;switch(c){case C:return{...e,isLoading:!0};case N:return{...e,isLoading:!1};default:return e}}});const R=a.loadState(),y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,S=Object(o.e)(A,R,y(Object(o.a)(m.a)));S.subscribe((()=>{const{parcels:e,settings:t}=S.getState();a.saveState({parcels:e,settings:t})}));var f=S;var P=e=>{e&&e instanceof Function&&c.e(3).then(c.bind(null,44)).then((({getCLS:t,getFID:c,getFCP:a,getLCP:n,getTTFB:s})=>{t(e),c(e),a(e),n(e),s(e)}))};const L={en:{SIGN_IN:"Sign In",TRACK_PARCEL:"Track",ENTER_TRACKING_NUMBER:"Enter tracking number",REMOVE_PARCEL:"Remove parcel",ARCHIVE_PARCEL:"Archive parcel",UNARCHIVE_PARCEL:"Unarchive parcel",CHECK_PARCEL_STATUS:"Check parcel status",NO_PARCELS:"You have no parcels",SHOW_ARCHIVED:"Show archived"},ua:{SIGN_IN:"\u0423\u0432\u0456\u0439\u0442\u0438",TRACK_PARCEL:"\u0412\u0456\u0434\u0441\u0442\u0435\u0436\u0438\u0442\u0438",ENTER_TRACKING_NUMBER:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0441\u0438\u043b\u043a\u0438",REMOVE_PARCEL:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043f\u043e\u0441\u0438\u043b\u043a\u0443",ARCHIVE_PARCEL:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0443 \u0430\u0440\u0445\u0456\u0432",UNARCHIVE_PARCEL:"\u0412\u0438\u043b\u0443\u0447\u0438\u0442\u0438 \u0437 \u0430\u0440\u0445\u0456\u0432\u0430",CHECK_PARCEL_STATUS:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0441\u0438\u043b\u043a\u0438",NO_PARCELS:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u043c\u0430\u0454 \u043f\u043e\u0441\u0438\u043b\u043e\u043a",SHOW_ARCHIVED:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0430\u0440\u0445\u0456\u0432"},ru:{SIGN_IN:"\u0412\u043e\u0439\u0442\u0438",TRACK_PARCEL:"\u041e\u0442\u0441\u043b\u0435\u0434\u0438\u0442\u044c",ENTER_TRACKING_NUMBER:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0441\u044b\u043b\u043a\u0438",REMOVE_PARCEL:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u044b\u043b\u043a\u0443",ARCHIVE_PARCEL:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0430\u0440\u0445\u0438\u0432",UNARCHIVE_PARCEL:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0430\u0440\u0445\u0438\u0432\u0430",CHECK_PARCEL_STATUS:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0441\u044b\u043b\u043a\u0438",NO_PARCELS:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u043e\u0441\u044b\u043b\u043e\u043a",SHOW_ARCHIVED:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0430\u0440\u0445\u0438\u0432"}};var T=c(0);const k=Object(n.createContext)();k.displayName="Localization";const I=({children:e})=>{const{language:t}=Object(r.c)((e=>e.settings));return Object(T.jsx)(k.Provider,{value:L[t],children:e})};var D=c(43);const U=()=>({type:C}),V=()=>({type:N}),H=e=>{const t=e.data[0];return{number:t.Number,citySender:t.CitySender,cityRecipient:t.CityRecipient,status:t.Status,scheduledDeliveryDate:t.ScheduledDeliveryDate,dateCreated:t.DateCreated,weight:t.DocumentWeight,statusCode:t.StatusCode,warehouseRecipient:t.WarehouseRecipientNumber.toString(),deliveryCost:Number(t.DocumentCost)}},w=e=>({id:Object(D.a)(),title:"New parcel",isArchived:!1,...H(e)}),K=e=>"3"===e.data[0].StatusCode,M=e=>t=>{t(U()),d.getParcelInfo(e).then((e=>{K(e)?alert("Parcel not found!"):t((e=>({type:O,payload:w(e)}))(e))})).catch((e=>console.log("Error",e))).finally((()=>t(V())))},G=(e,t)=>c=>{c(U()),d.getParcelInfo(t).then((t=>{K(t)?alert("Parcel not found!"):c(((e,t)=>({type:_,payload:{id:e,data:H(t)}}))(e,t))})).catch((e=>console.log("Error",e))).finally((()=>c(V())))},B=(e,t)=>c=>{c(((e,t)=>({type:_,payload:{id:e,data:t}}))(e,t))},F=e=>t=>{t((e=>({type:p,payload:e}))(e))},q=e=>t=>{t({type:E,payload:e})},W={string:e=>e,object:e=>Object.keys(e).filter((t=>e[t])).join(" ").trim(),array:e=>e.join(" ").trim()},J={string:e=>"string"===typeof e,object:e=>"object"===typeof e&&!Array.isArray(e),array:e=>Array.isArray(e)},z=(...e)=>e.map((e=>(e=>{const t=Object.keys(J).find((t=>J[t](e)));return W[t](e)})(e))).join(" ").trim();c(22);c(23);const Q="ui-checkbox",X=e=>{const{id:t,name:c,onChange:a,className:n,title:s,checked:i,disabled:l}=e,r=z(Q,n);return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("label",{className:r,children:[Object(T.jsx)("input",{type:"checkbox",name:c,id:t,className:"".concat(Q,"__input"),title:s,onChange:a,checked:i,disabled:l}),Object(T.jsx)("span",{className:"".concat(Q,"__checkmark")})]})})};X.defaultProps={className:"",title:"",onChange:null,name:"ui-checkbox",id:"",checked:!1,disabled:!1};c(24);const Y="ui-icon-button",Z=e=>{const{icon:t="trash",onClick:c,className:a="",title:n="Click me",type:s="button"}=e,i=z(Y,"icon-".concat(t),a);return Object(T.jsx)("button",{type:s,className:i,onClick:c,title:n,children:Object(T.jsx)("span",{className:"".concat(Y,"__text"),children:n})})};c(25);const $=e=>{const{type:t,name:c,value:a,onChange:n,onBlur:s,className:i,placeholder:l,required:r,autofocus:o,disabled:d}=e,u=z("ui-input",i);return Object(T.jsx)("input",{type:t,name:c,value:a,className:u,onChange:n,onBlur:s,placeholder:l,required:r,autoFocus:o,disabled:d,size:a.length})};$.defaultProps={className:"",onChange:null,onBlur:null,value:"",type:"text",name:"ui-input",placeholder:"",required:!1,autofocus:!1,disabled:!1};c(26);const ee="ui-select",te=e=>{const{value:t,onChange:c,options:a,className:n,title:s,required:i}=e,l=z(ee,n);return Object(T.jsx)("select",{onChange:c,value:t,required:i,className:l,title:s,children:a.map((({value:e,disabled:t,label:c})=>Object(T.jsx)("option",{value:e,disabled:t,className:"".concat(ee,"__option"),children:c},e)))})};te.defaultProps={className:"",onChange:null,value:"",title:"Select me",options:[{value:"opt1",label:"Option 1"},{value:"opt2",label:"Option 2"},{value:"opt3",label:"Option 3"}],required:!1};c(27);c(28);const ce="ui-modal",ae=({title:e,isVisible:t,onClose:c,children:a,className:s})=>{const l=Object(n.useContext)(k),r=z(ce,s),o=document.getElementById("modal-root");return t&&Object(i.createPortal)(Object(T.jsx)("div",{className:"".concat(ce,"__backdrop"),children:Object(T.jsxs)("div",{role:"dialog","aria-labelledby":"ui-modal-title","aria-modal":"true",className:r,children:[Object(T.jsxs)("div",{className:"ui-modal__header",children:[Object(T.jsx)("h4",{id:"ui-modal-title",className:"".concat(ce,"__title"),children:e}),Object(T.jsx)(Z,{className:"".concat(ce,"__btn-close"),icon:"cancel",onClick:c,title:l.CLOSE})]}),Object(T.jsx)("div",{className:"".concat(ce,"__content"),children:a})]})}),o)};ae.defaultProps={title:"Modal title",isVisible:!1,className:""};c(29);c(30);const ne="add-parcel-form",se=()=>{const e=Object(n.useContext)(k),t=Object(r.b)(),{parcels:c}=Object(r.c)((e=>e)),[a,s]=Object(n.useState)("");return Object(T.jsxs)("form",{action:"",className:ne,onSubmit:e=>{if(e.preventDefault(),!a)return void alert("Please enter tracking number!");c.some((e=>e.number===a))?alert("Parcel already added!"):(t(M(a)),s(""))},noValidate:!0,children:[Object(T.jsx)($,{className:"".concat(ne,"__input"),value:a,onChange:e=>s(e.target.value),placeholder:e.ENTER_TRACKING_NUMBER,required:!0}),Object(T.jsx)(Z,{type:"submit",icon:"search",className:"".concat(ne,"__btn"),text:e.TRACK_PARCEL})]})};c(31);const ie="parcel-list-item",le=e=>{const{data:t,onRemoveParcelClick:c,onParcelUpdate:a,onParcelArchive:s,onCheckParcelStatusClick:i,STR:l}=e,{id:r,number:o,citySender:d,cityRecipient:u,status:j,scheduledDeliveryDate:h,isArchived:b}=t,[m,O]=Object(n.useState)(t.title),[_,p]=Object(n.useState)(!1);Object(n.useEffect)((()=>p(!1)),[t]);const C=z("".concat(ie,"__check-btn"),{loading:_}),N=b?l.UNARCHIVE_PARCEL:l.ARCHIVE_PARCEL;return Object(T.jsxs)("li",{id:r,className:ie,children:[Object(T.jsxs)("header",{className:"".concat(ie,"__header"),children:[Object(T.jsx)($,{className:"".concat(ie,"__title"),value:m,onChange:e=>O(e.target.value),onBlur:()=>a(r,{title:m})}),!b&&Object(T.jsx)(Z,{onClick:()=>{p(!0),i(r)},className:C,title:l.CHECK_PARCEL_STATUS,icon:"arrows-cw"}),Object(T.jsx)(Z,{onClick:()=>s(r),className:"".concat(ie,"__archive-btn"),title:N,icon:"box"}),Object(T.jsx)(Z,{onClick:()=>c(r),className:"".concat(ie,"__remove-btn"),title:l.REMOVE_PARCEL,icon:"trash"})]}),Object(T.jsxs)("main",{className:"".concat(ie,"__main"),children:[Object(T.jsx)("h4",{className:"".concat(ie,"__number"),children:o}),Object(T.jsxs)("div",{className:"".concat(ie,"__route"),children:[d," \u21d2 ",u]}),Object(T.jsx)("div",{className:"".concat(ie,"__status"),children:j}),Object(T.jsx)("div",{className:"".concat(ie,"__delivery-date"),children:h})]})]})};c(32);const re="parcel-list",oe=()=>{const e=Object(r.b)(),t=Object(n.useContext)(k),[c,a]=Object(n.useState)(!1),s=Object(r.c)((e=>e.parcels)).filter((e=>e.isArchived===c)),i=Object(r.c)((e=>e.api.isLoading)),l=t=>e(F(t)),o=t=>{const{number:c}=s.find((e=>e.id===t));e(G(t,c))},d=(t,c)=>e(B(t,c)),u=t=>{const{isArchived:c}=s.find((e=>e.id===t));e(B(t,{isArchived:!c}))};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"".concat(re,"__show-archived"),children:[Object(T.jsx)("span",{children:t.SHOW_ARCHIVED}),Object(T.jsx)(X,{checked:c,onChange:()=>{a(!c)}})]}),s.length?Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("ul",{className:re,children:s.map((e=>Object(T.jsx)(le,{data:e,STR:t,isApiLoading:i,onRemoveParcelClick:l,onCheckParcelStatusClick:o,onParcelUpdate:d,onParcelArchive:u},e.id)))})}):Object(T.jsx)("div",{className:"".concat(re,"__no-parcels"),children:t.NO_PARCELS})]})};c(33);c(34);const de=()=>{const e=Object(r.b)(),{theme:t}=Object(r.c)((e=>e.settings)),c="light"===t?"moon":"sun";return Object(T.jsx)(Z,{icon:c,onClick:()=>{e(q({theme:"light"===t?"dark":"light"}))},className:"theme-toggler"})},ue=[{value:"en",label:"EN"},{value:"ua",label:"UA"},{value:"ru",label:"RU"}];c(35);const je=()=>{const e=Object(r.b)(),t=Object(n.useContext)(k),{language:c}=Object(r.c)((e=>e.settings));return Object(T.jsx)(te,{value:c,onChange:t=>e(q({language:t.target.value})),options:ue,className:"language-selector",title:t.TOGGLE_LANGUAGE})};c(36);const he="header",be=()=>Object(T.jsx)("header",{className:he,children:Object(T.jsxs)("div",{className:"header__content wrapper",children:[Object(T.jsx)("span",{className:"header__logo",children:"MyParcels"}),Object(T.jsx)("div",{className:"header__middle",children:Object(T.jsx)(se,{})}),Object(T.jsxs)("div",{className:"header__right",children:[Object(T.jsx)(je,{}),Object(T.jsx)(de,{})]})]})});c(37);const me=({children:e})=>Object(T.jsx)("main",{className:"main wrapper",children:Object(T.jsx)("div",{className:"main__content",children:e})});c(38);const Oe="footer",_e=()=>Object(T.jsx)("footer",{className:Oe,children:Object(T.jsxs)("div",{className:"".concat(Oe,"__content wrapper"),children:[Object(T.jsxs)("a",{href:"https://github.com/serhii-tyshchenko",children:["\xa9 ","Serhii Tyshchenko"]}),"version ","0.1.4"]})}),pe=({children:e})=>Object(T.jsxs)("div",{className:"container",children:[Object(T.jsx)(be,{}),Object(T.jsx)(me,{children:e}),Object(T.jsx)(_e,{})]});c(39);s.a.Component;const Ce=()=>Object(T.jsx)(pe,{children:Object(T.jsx)(oe,{})});var Ne=()=>{const{theme:e}=Object(r.c)((e=>e.settings));return document.documentElement.setAttribute("data-theme",e),Object(T.jsx)(Ce,{})};c(40);l.a.render(Object(T.jsx)(r.a,{store:f,children:Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(I,{children:Object(T.jsx)(Ne,{})})})}),document.getElementById("root")),P()}]),[[41,1,2]]]);
//# sourceMappingURL=main.f994e078.chunk.js.map